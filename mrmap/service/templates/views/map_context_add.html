{% extends 'base.html' %}
{% load static %}
{% load bootstrap4 %}
{% block body %}

<div class="container-fluid px-5">
    {% include 'sceletons/breadcrumb.html'%}

    <form id="id_mapcontext_form" action="{{form_mapcontext.action_url}}" method="post">
        {% csrf_token %}
        <div class="modal-body">
            {{ form.management_form }}
            <label for="mapcontext_tree">Ebenen und Datenangebote</label>
            <div id="mapcontext_tree"
                 style="border: 1px solid #ced4da; border-radius: .25rem; padding: .375rem .75rem"
                 class="form-group" data-mapcontext-id="{{ context_id }}">
            </div>
            {% for form in form %}
            <div class="mapcontext_layer_form" data-jstree-node-id="{{form.id.value}}" style="display: none">
                {% bootstrap_form form %}
            </div>
            {% endfor %}
        </div>
        <div class="modal-footer">
            <!-- <modal-footer> -->
            <div class="container-fluid">
                <div class="row">
                    <div class="col-sm">
                        <a href="{% url 'resource:mapcontexts-index' %}" class="btn btn-warning" role="button"
                           aria-pressed="true">
                            <i class="fas fa-trash"></i> Abbrechen
                        </a>
                    </div>
                    <div class="col-sm">
                        <div class="float-right">
                            <button id="id_add_new_dataset_wizard_btn_save" name="wizard_save" value="True"
                                    type="submit" class="btn btn-primary">
                                <i class="fas fa-save"></i> Speichern
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </form>
</div>

<div id="id_modal_owsresource" class="modal hide fade" tabindex="-1" role="dialog">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">Layer Resource</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <form>
                <div class="modal-body">
                    <div class="form-group">
                        <label for="id_owsresource_name">Name</label>
                        <input type="text" name="name" class="form-control" placeholder="Name" title="" required
                               id="id_owsresource_name">
                    </div>
                    <div class="form-group">
                        <label for="id_wms_offering">WMS Offering</label>
                        <input type="text" name="wms_layer" class="form-control" placeholder="WMS Layer" title=""
                               required id="id_wms_offering">
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                    <button type="submit" class="btn btn-primary">Save changes</button>
                </div>
            </form>
        </div>
    </div>
</div>

<link rel="stylesheet" type="text/css" href="{% static '/css/jstree-default/style.min.css' %}" media="all"/>
<link rel="stylesheet" type="text/css" href="{% static '/service/css/folder-style.css' %}" media="all"/>

<script type="text/javascript" src="{% static '/js/jstree.min.js' %}"></script>
<script type="text/javascript" src="{% static '/js/jstree-actions.min.js' %}"></script>
<script type="text/javascript" src="{% static '/service/js/draggable_tree.js' %}"></script>

{% endblock body %}
