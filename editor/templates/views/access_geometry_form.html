{% load i18n static %}
<link rel="stylesheet" href="{% static '/css/leaflet-geoman.css' %}" />
<script src="{% static 'js/leaflet-geoman.min.js' %}"></script>

<div class="row">
    <div class="col">
        <div id="id_map" style="height: 40vh; min-height: 200px;"></div>
    </div>
</div>
<div class="row mt-2">
    <div class="col">
        <button id="geometry-upload" type="button" class="btn {{ THEME.MODAL.BTN_PRIMARY_COLOR }} " onclick="$('.geometry-upload').click();">
            {% autoescape off %}{{THEME.ICONS.UPLOAD}}{% endautoescape %} {% trans 'Import a GML3 or GeoJSON file' %}
        </button>
        <input class="d-none geometry-upload" type="file" title="{% trans 'Load geometry' %}"/>

    </div>
    <div class="col">
        <button id="geometry-download" type="button" class="btn {{ THEME.MODAL.BTN_PRIMARY_COLOR }} geometry-download">
            {% autoescape off %}{{THEME.ICONS.DOWNLOAD}}{% endautoescape %} {% trans 'Export drawn geometry as GeoJSON' %}
        </button>
    </div>
</div>

{% with id_map='id' bbox=bbox  %}
    {% include 'leaflet/leaflet-client.html' %}
    <script type="text/javascript">
        // TODO: since initialization function is implemented, we can use fading and after fading of modal is finished, we can run the initialization function.
        // example
        //$('#myModal').on('shown.bs.modal', function (e) {
        //        initializeLeafletClient();
        //})
        initializeLeafletClient();
    </script>
{% endwith %}
{% with id_map='id'  %}
    {% include 'leaflet-extentions/controls.html' %}
{% endwith %}