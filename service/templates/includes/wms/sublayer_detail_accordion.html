{% extends 'sceletons/accordion.html' %}
{% load static i18n %}

{% block accordion-button-title %}
<i class="fa" aria-hidden="true"></i>
{{ layer.metadata.title }}
{% if layer.child_layer.all|length > 0 %}
    <span class="badge {{THEME.ACCORDION.PILL_BADGE_LIGHT_COLOR}}">{{ layer.child_layer.all|length }}</span>
{% endif %}
{% endblock %}

{% block accordion-body %}

    <div id="id_content_service_{{layer.metadata.id}}">
        {% include 'includes/loading_spinner.html' %}
    </div>
    <script type="text/javascript">
        $('#id_accordion_btn_{{id_accordion}}_{{id_accordion_combined}}').click(function() {
            console.log('clicked');
          if ( $('#id_accordion_btn_{{id_accordion}}_{{id_accordion_combined}}').hasClass('collapsed') ) {
            $.get( '{% url 'service:detail' layer.metadata.id %}?no-base', function( data ) {
                $( "#id_content_service_{{layer.metadata.id}}" ).html( data );
            });
          }
        });
    </script>

{% endblock %}
