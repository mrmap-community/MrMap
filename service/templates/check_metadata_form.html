
{% load i18n static %}

{% block body %}
<style>
    .form-table{
        color: gray;
        max-height: 30vh;
        overflow-y: auto;
    }

    .field-label, .field{
        font-size: 1.2em;
    }

    .field input{
        color: gray;
        background-color: white;
        border: 1px solid gray;
        border-radius: 0.25rem;
        padding: 0.375rem 0.75rem;
    }

    .field input:focus{
        -webkit-box-shadow: 0 0 10px var(--primary-color);
        -moz-box-shadow: 0 0 10px var(--primary-color);
        box-shadow: 0 0 10px var(--primary-color);
    }

    .form-submit-area{
        padding: 20px 0;
    }


    #capabilities-uri{
        width: 80%;
    }

    .form-table{
        font-size: 0.9em !important;
        color: black;
    }
    .form-table tbody{
        border: 1px solid var(--primary-color-light);
        border-radius: 10px;
        padding: 10px;
    }
    .form-table td{

    }
</style>
<div class="modal-dialog">
    <div class="modal-close" title="{% trans 'Close' %}">
        x
    </div>
    {% if error is not None %}
        <h2 class="error">{% trans 'An error occured' %}</h2>
        <article>
            {% blocktrans %}
            Service could not be loaded. <br>
            The following HTTP error was raised during connection: <b>{{ error }}</b> <br>
            Please make sure the service is publicly available.
            {% endblocktrans %}
        </article>
        <div class="close-button button">{% trans 'Okay' %}</div>
    {% elif unknown_error is not None %}
        <h2 class="error">{% trans 'An error occured' %}</h2>
        <article>
            {% blocktrans %}
            Service could not be loaded. <br>
            The following error occured: <b>{{ unknown_error }}</b> <br>
            Please contact an administrator to inform about this issue.
            {% endblocktrans %}
        </article>
        <div class="close-button button">{% trans 'Okay' %}</div>
    {% trans 'The service has been registered. The following is an extract from the metadata.' %} <br>
    <form class="form-table" action="/service/new/" method="post">
        {% csrf_token %}
        <h4>{% trans 'Service:' %}</h4>
        <table class="form-table">
            <tr>
                <td class="field-label">{% trans 'Title:' %}</td>
                <td class="field">{{ service.service_identification_title }}</td>
            </tr>
            <tr>
                <td class="field-label">{% trans 'Type:' %}</td>
                <td class="field">{{ service.service_type.value }}</td>
            </tr>
            <tr>
                <td class="field-label">{% trans 'Abstract:' %}</td>
                <td class="field">{{ service.service_identification_abstract }}</td>
            </tr>
            <tr>
                <td class="field-label">{% trans 'Fees:' %}</td>
                <td class="field">{{ service.service_identification_fees }}</td>
            </tr>
            {% if service.service_type.value == "wms" %}
            <tr>
                <td class="field-label">{% trans 'Number of layers:' %}</td>
                <td class="field">{{ service.layers|length }}</td>
            </tr>
            {% endif %}
            <tr>
                <td class="field-label">{% trans 'Online resources:' %}</td>
                <td class="field">{{ service.service_provider_onlineresource_linkage }}</td>
            </tr>
        </table>
        <h4>{% trans 'Contact:' %}</h4>
        <table class="form-table">
            <tr>
                <td class="field-label">{% trans 'Data provider:' %}</td>
                <td class="field">{{ service.service_provider_providername }}</td>
            </tr>
            <tr>
                <td class="field-label">{% trans 'Responsible person:' %}</td>
                <td class="field">{{ service.service_provider_responsibleparty_individualname }}</td>
            </tr>
            <tr>
                <td class="field-label">{% trans 'E-Mail:' %}</td>
                <td class="field">{{ service.service_provider_address_electronicmailaddress }}</td>
            </tr>
        </table>
    </form>
    <div class="submit-button button">{% trans 'Finish' %}</div>
    {% endif %}
</div>

<script>
    $(".modal-close, .close-button").click(function(){
        toggleOverlay("");
    });

    $(".submit-button").click(function(){
        toggleOverlay("");
        location.reload();
    });

    $('form').bind('keypress', function(event){
        if (event.keyCode == 13){
            // Enter key pressed
            event.preventDefault();
            $("submit-button").click();
        }
    });

    $(document).bind('keypress', function(event){
        if (event.keyCode == 27){
            // Esc key pressed
            event.preventDefault();
            $(".modal-close").click();
        }
    });
</script>

{% endblock %}