{% load i18n static tz %}

<div class="overview-title-actions-container">
        <div class="container-left">
        <h2>{% trans 'WFS' %}</h2>
        {% if 'can_register_service' in user_permissions %}
            <div class="overview-action">
                <span class="add-button" title="{% trans 'Register new' %}" datatype="wfs" typeof="service">
                    &#xFF0B;
                </span>
            </div>
        {% endif %}
        </div>
        <div class="container-right">
        </div>
    </div>
{% if metadata_list_wfs|length > 0 %}
<div>
        <div>
            <label for="rpp-select-wfs">{% trans 'Results per page' %}:</label>
            <select id="rpp-select-wfs" class="rpp-select default-select" title="{% trans 'Results per page' %}:">
                {% for option in rpp_select_options %}
                    <option value="{{ option }}" {% if option == rpp %}selected="selected"{% endif %}>{{ option }}</option>
                {% endfor %}
            </select>
        </div>
    </div>
<div class="filter-container">
        <div class="container-left">
            <input class="search-field" type="text" name="text-filter" data-type="wfs" placeholder="{% trans 'Enter text to filter' %}">
        </div>
        <div class="container-center">
            {% if metadata_list_wfs.paginator.num_pages > 1 %}
            <div>
                <div class="pagination-wrapper">
                    {% if metadata_list_wfs.number != 1 %}
                    <a class="pagination-page" href="?wmsp={{ metadata_list_wms.number }}&wfsp=1&rpp={{ rpp }}">
                        1
                    </a>
                    <span>...</span>
                    {% endif %}
                    <input class="pagination-input" data-type="wmsp" type="number" min="1" value="{{ metadata_list_wfs.number }}">
                    {% if metadata_list_wfs.number != metadata_list_wfs.paginator.num_pages %}
                    <span>...</span>
                    <a class="pagination-page" href="?wmsp={{ metadata_list_wms.paginator.num_pages }}&wfsp={{ metadata_list_wfs.number }}&rpp={{ rpp }}">
                        {{ metadata_list_wfs.paginator.num_pages }}
                    </a>
                    {% endif %}
                </div>
            </div>
            {% endif %}
        </div>
        <div class="container-right">
        </div>
    </div>
<table class="overview-table">
    <tr>
        <th class="table-header">
            {% trans 'Title' %}
        </th>
        <th class="table-header">
            {% trans 'Featuretypes' %}
        </th>
        <th class="table-header">
            {% trans 'Active' %}
        </th>
        <th class="table-header">
            {% trans 'Secured access' %}
        </th>
        <th class="table-header">
            {% trans 'Secured externally' %}
        </th>
        <th class="table-header">
        {% trans 'Version' %}
        </th>
            <th class="table-header">
            {% trans 'Data provider' %}
        </th>
            <th class="table-header">
            {% trans 'Registered by group' %}
        </th>
            <th class="table-header">
            {% trans 'Registered for' %}
        </th>
            <th class="table-header">
            {% trans 'Created' %}
        </th>
    </tr>
    {% for wfs in metadata_list_wfs %}
    <tr class="service" data-type="wfs">
        <td class="table-cell" data-type="title">
            <a href="{% url 'service:detail' id=wfs.id %}" title="{% trans 'Open details' %}">{{ wfs.title }}</a>
        </td>
        <td class="table-cell center">
            {{ wfs.service.featuretypes.all|length }}
        </td>
        <td class="table-cell center" data-type="parent-service">
            {% if wfs.is_active %}
            <img src="{% static 'service/images/icn_true.png' %}" title="{% trans 'Active' %}">
            {% else %}
            <img src="{% static 'service/images/icn_false.png' %}" title="{% trans 'Not active' %}">
            {% endif %}
        </td>
        <td class="table-cell center" data-type="parent-service">
            {% if wfs.is_secured %}
            <img src="{% static 'service/images/icn_true.png' %}" title="{% trans 'Access secured' %}">
            {% else %}
            <img src="{% static 'service/images/icn_false.png' %}" title="{% trans 'Access not restricted' %}">
            {% endif %}
        </td>
        <td class="table-cell center" data-type="parent-service">
            {% if wfs.has_external_authentication %}
            <img src="{% static 'service/images/icn_true.png' %}" title="{% trans 'Access secured' %}">
            {% else %}
            <img src="{% static 'service/images/icn_false.png' %}" title="{% trans 'Access not restricted' %}">
            {% endif %}
        </td>
        <td class="table-cell">
            {{ wfs.service.servicetype.version }}
        </td>
        <td class="table-cell">
            <a href="{% url 'structure:detail-organization' wfs.contact.id %}">{{ wfs.contact.organization_name }}</a>
        </td>
        <td class="table-cell">
            <a href="{% url 'structure:detail-group' wfs.service.created_by.id %}">{{ wfs.service.created_by }}</a>
        </td>
        <td class="table-cell">
            {% if wfs.service.published_for is not None %}
            <a href="{% url 'structure:detail-organization' wfs.service.published_for.id %}">{{ wfs.service.published_for }}</a>
            {% else %}
            {{ wfs.service.published_for }}
            {% endif %}
        </td>
        <td class="table-cell">
            {{ wfs.created | localtime }}
        </td>
    </tr>
    {% endfor %}
</table>
{% else %}
{% trans 'None ¯\_(ツ)_/¯' %}
{% endif %}